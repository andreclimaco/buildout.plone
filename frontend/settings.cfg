[users]
os = zope


[hostname]
portal = 10.30.32.98

[hosts]
haproxy = 0.0.0.0
varnish = 0.0.0.0
supervisor = 0.0.0.0

[ports]
haproxy = 8000
varnish = 8010
varnish-adm = 8010
nginx = 80
http = 80
supervisor = 9001

[varnish-cache]
type = malloc
size = 96M

[varnish-purge-hosts]
hosts =
    "10.30.32.98";

[supervisor-settings]
user = admin
password = admin

[haproxy-backends]
instance01 = ${hostname:portal}:8401
instance02 = ${hostname:portal}:8402
instance03 = ${hostname:portal}:8403
instance04 = ${hostname:portal}:8404
instance05 = ${hostname:portal}:8405
instance06 = ${hostname:portal}:8406
instance07 = ${hostname:portal}:8407



[haproxy-auth-backends]
backends =
    server  instance01 ${haproxy-backends:instance01} cookie p0101 check maxconn 2 rise 1
    server  instance02 ${haproxy-backends:instance02} cookie p0102 check maxconn 2 rise 1
    server  instance03 ${haproxy-backends:instance03} cookie p0103 check maxconn 2 rise 1
    server  instance04 ${haproxy-backends:instance04} cookie p0104 check maxconn 2 rise 1

[haproxy-anon-backends]
backends =
    server  instance05 ${haproxy-backends:instance05} cookie p0105 check maxconn 2 rise 1
    server  instance06 ${haproxy-backends:instance06} cookie p0106 check maxconn 2 rise 1
    server  instance07 ${haproxy-backends:instance07} cookie p0107 check maxconn 2 rise 1
